# Matlab Homework Submitter

The purpose of this repository is to take matlab `.m` files and produce a fancy report that need not be modified

## Usage

### Requirements

- [node.js](https://nodejs.org/en/download/)
- [pdflatex](https://www.latex-project.org/get/)
- `minted` latex package (look it up, this is not a tutorial on installing software)
- git (preferred, not needed)

### How to install (experts)

```shell
git clone https://github.com/jojo2357/matalb-homework-submitter.git && cd matalb-homework-submitter
```

### How to install (noobs)

On the homepage of this repo, click that `code` button and then click `download zip`

Once that is downloaded, unzip it in your file explorer and then go into the unzipped folder until you see the files
from this site.

### How to run

For those in a unix environment, if node is installed correctly then

```shell
sudo chmod +x latexCombiner.js
./latexCombiner.js 0 texplates/coverpage.tex
```

Will suffice, as will

```shell
node latexCombiner.js 0 texplates/coverpage.tex
```

For those who like to use computers without actually using one, go into your file explorer, and in the top bar, click it
so the path turns to text. Delete that text and replace it with `cmd` and hit enter. Then enter into that command
prompt:

```shell
node latexCombiner.js 0 texplates/coverpage.tex
```

### What are those arguments for? How do I use this?

Thanks for asking. Here is a basic rundown of how the program works.

1. The arguments you pass correspond to the homework number, and the location of your coverpage tex file. This file gets
   included *before* `\begin{document}` so you can add whatever you want.
    - Note on HW number: your files must be in a folder such as `/HW\d+/` in order for the program to find it. Look at
      how it is in this repo, all the `.m` files are in `HW0` and that means we pass 0 as the homework number.
2. After the program finds and validates your `.m` files and coverpage, it will call `matlab` to generate a tex report
   file for each `.m` file.
3. The program will "digest" each standalone document tex file into a single tex file. It will then convert all of the
   code blocks to `minted` code blocks. You will need to have the `minted` installed and setup.
    - If you cannot get `minted` setup, open `latexCombiner.js` in a text editor and remove these lines:
   ```js
   .map(line => (line === "\\begin{verbatim}" ? "\\begin{minted}{matlab}" : line))
   .map(line => (line === "\\end{verbatim}" ? "\\end{minted}" : line))
   ```
4. After it has done that, it will remove the `contents` blocks generated by MATLAB, as well as make sections
   use `addcontentstoline` to remove the weird numbering scheme.
5. Lastly, it will combine all of the required packages, along with the coverpage tex you supplied to make an output
   file. On windows you will need to manually open it, on GNOME desktops it will open automatically.

### Behavioral Notes

The program will compare edit times of source `.m` files and their generated `.tex` files. If the `.tex` file is younger
than the `.m` file, it will no ask MATLAB to regenerate that file in order to speed up execution

#### Easter egg

If you include LaTeX in
your [MATLAB comments](https://www.mathworks.com/help/matlab/matlab_prog/marking-up-matlab-comments-for-publishing.html)
or in your title page, you may want to be able to recycle the same page/comments and here are the helper commands that
are created for your convenience:

| Command    | Value                                              |
|------------|----------------------------------------------------|
| \HWVersion | The number of the homework (in the demo this is 0) |

#### License

This repository is released under the Glorious Peoples License (GPL), which can be found in LICENSE. All files in this
repository are covered by the terms of said license, which can also be found
at [https://www.gnu.org/licenses/](https://www.gnu.org/licenses/)